<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Routing matrix - A Vehicle Routing Problem Solver Documentation</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="This book describes a Vehicle Routing Problem solver.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../../favicon.png">
        
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        
        <link rel="stylesheet" href="../../../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../../../resources/leaflet.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="../../../getting-started/index.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../getting-started/features.html"><strong aria-hidden="true">1.1.</strong> Features</a></li><li class="chapter-item expanded "><a href="../../../getting-started/installation.html"><strong aria-hidden="true">1.2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../../../getting-started/import.html"><strong aria-hidden="true">1.3.</strong> Defining problem</a></li><li class="chapter-item expanded "><a href="../../../getting-started/routing.html"><strong aria-hidden="true">1.4.</strong> Acquiring routing info</a></li><li class="chapter-item expanded "><a href="../../../getting-started/solver.html"><strong aria-hidden="true">1.5.</strong> Running solver</a></li><li class="chapter-item expanded "><a href="../../../getting-started/analysis.html"><strong aria-hidden="true">1.6.</strong> Analyzing results</a></li><li class="chapter-item expanded "><a href="../../../getting-started/performance.html"><strong aria-hidden="true">1.7.</strong> Evaluating performance</a></li></ol></li><li class="chapter-item expanded "><a href="../../../concepts/index.html"><strong aria-hidden="true">2.</strong> Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/index.html"><strong aria-hidden="true">2.1.</strong> Pragmatic format</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/problem/index.html"><strong aria-hidden="true">2.1.1.</strong> Modeling a problem</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/problem/jobs.html"><strong aria-hidden="true">2.1.1.1.</strong> Jobs</a></li><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/problem/vehicles.html"><strong aria-hidden="true">2.1.1.2.</strong> Vehicles</a></li><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/problem/relations.html"><strong aria-hidden="true">2.1.1.3.</strong> Relations</a></li><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/problem/objectives.html"><strong aria-hidden="true">2.1.1.4.</strong> Objectives</a></li></ol></li><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/routing/index.html"><strong aria-hidden="true">2.1.2.</strong> Routing data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/routing/format.html" class="active"><strong aria-hidden="true">2.1.2.1.</strong> Routing matrix</a></li><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/routing/profile.html"><strong aria-hidden="true">2.1.2.2.</strong> Profiles</a></li></ol></li><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/solution/index.html"><strong aria-hidden="true">2.1.3.</strong> Solution model</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/solution/tour-list.html"><strong aria-hidden="true">2.1.3.1.</strong> Tour list</a></li><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/solution/statistic.html"><strong aria-hidden="true">2.1.3.2.</strong> Statistic</a></li><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/solution/unassigned-jobs.html"><strong aria-hidden="true">2.1.3.3.</strong> Unassigned jobs</a></li><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/solution/violations.html"><strong aria-hidden="true">2.1.3.4.</strong> Violations</a></li></ol></li><li class="chapter-item expanded "><a href="../../../concepts/pragmatic/errors/index.html"><strong aria-hidden="true">2.1.4.</strong> Error index</a></li></ol></li><li class="chapter-item expanded "><a href="../../../concepts/scientific/index.html"><strong aria-hidden="true">2.2.</strong> Scientific formats</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../concepts/scientific/solomon.html"><strong aria-hidden="true">2.2.1.</strong> Solomon benchmark</a></li><li class="chapter-item expanded "><a href="../../../concepts/scientific/lilim.html"><strong aria-hidden="true">2.2.2.</strong> Li&amp;Lim benchmark</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../examples/index.html"><strong aria-hidden="true">3.</strong> Examples</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../examples/pragmatic/index.html"><strong aria-hidden="true">3.1.</strong> Pragmatic format</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../examples/pragmatic/basics/index.html"><strong aria-hidden="true">3.1.1.</strong> Basic feature usage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../examples/pragmatic/basics/job-types.html"><strong aria-hidden="true">3.1.1.1.</strong> Basic job usage</a></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/basics/multi-day.html"><strong aria-hidden="true">3.1.1.2.</strong> Multi day plan</a></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/basics/dispatch.html"><strong aria-hidden="true">3.1.1.3.</strong> Vehicle dispatch</a></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/basics/break.html"><strong aria-hidden="true">3.1.1.4.</strong> Vehicle break</a></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/basics/reload.html"><strong aria-hidden="true">3.1.1.5.</strong> Multiple trips</a></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/basics/relations.html"><strong aria-hidden="true">3.1.1.6.</strong> Relations</a></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/basics/skills.html"><strong aria-hidden="true">3.1.1.7.</strong> Skills</a></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/basics/profiles.html"><strong aria-hidden="true">3.1.1.8.</strong> Multiple profiles</a></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/basics/unassigned.html"><strong aria-hidden="true">3.1.1.9.</strong> Unassigned job</a></li></ol></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/objectives/index.html"><strong aria-hidden="true">3.1.2.</strong> Objective usage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../examples/pragmatic/objectives/objective-default.html"><strong aria-hidden="true">3.1.2.1.</strong> Default behavior</a></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/objectives/objective-balance-max-load.html"><strong aria-hidden="true">3.1.2.2.</strong> Balance max load</a></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/objectives/objective-balance-activities.html"><strong aria-hidden="true">3.1.2.3.</strong> Balance activities</a></li><li class="chapter-item expanded "><a href="../../../examples/pragmatic/objectives/objective-balance-distance.html"><strong aria-hidden="true">3.1.2.4.</strong> Balance distance</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../examples/interop/index.html"><strong aria-hidden="true">3.2.</strong> Language interop</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../examples/interop/java.html"><strong aria-hidden="true">3.2.1.</strong> Java</a></li><li class="chapter-item expanded "><a href="../../../examples/interop/kotlin.html"><strong aria-hidden="true">3.2.2.</strong> Kotlin</a></li><li class="chapter-item expanded "><a href="../../../examples/interop/javascript.html"><strong aria-hidden="true">3.2.3.</strong> Javascript</a></li><li class="chapter-item expanded "><a href="../../../examples/interop/python.html"><strong aria-hidden="true">3.2.4.</strong> Python</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../internals/index.html"><strong aria-hidden="true">4.</strong> Internals</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../internals/overview.html"><strong aria-hidden="true">4.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../internals/rosomaxa.html"><strong aria-hidden="true">4.2.</strong> Rosomaxa</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">A Vehicle Routing Problem Solver Documentation</h1>

                    <div class="right-buttons">
                        
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#routing-matrix-format" id="routing-matrix-format">Routing matrix format</a></h1>
<p>In general, routing matrix has the following schema:</p>
<ul>
<li><code>profile</code> (required for time dependent VRP) is name of vehicle profile</li>
<li><code>timestamp</code> (optional) a date in RFC3999 for which routing info is applicable. Can be used for time dependent VRP.</li>
<li><code>travelTimes</code> (required) is square matrix of durations in abstract time units represented via single dimensional array</li>
<li><code>distances</code> (required) is square matrix of distances in abstract distance unit represented via single dimensional array</li>
<li><code>errorCodes</code> (optional): must be present if there is no route between some locations. Non-zero value signalizes about
routing error.</li>
</ul>
<p>Both durations and distances are mapped to the list of unique locations generated from the problem definition. In this
list, locations are specified in the order they defined. For example, if you have two jobs with locations A and B, one
vehicle type with depot location C, then you have the following location list: A,B,C. It corresponds to the matrix (durations
or distances):</p>
<p>|    |    |    |
|----|----|----|
|  0 | AB | AC |
| BA |  0 | BC |
| CA | CB |  0 |</p>
<p>where</p>
<ul>
<li><code>0</code>: zero duration or distance</li>
<li><code>XY</code>: distance or duration from X location to Y</li>
</ul>
<p>As single dimensional array it looks like:</p>
<pre><code>[0,AB,AC,BA,0,BC,CA,CB,0]
</code></pre>
<p><code>vrp-cli</code> command provides a helper command to get it as well as <code>pragmatic</code> lib exposes method to get the list
pragmatically:</p>
<pre><code>vrp-cli solve pragmatic problem.json --get-locations -o locations.json
</code></pre>
<p>The output format is a simply array of unique geo locations:</p>
<pre><code class="language-json">[
  {
    &quot;lat&quot;: 52.52599,
    &quot;lng&quot;: 13.45413
  },
  {
    &quot;lat&quot;: 52.5225,
    &quot;lng&quot;: 13.4095
  },
  {
    &quot;lat&quot;: 52.5165,
    &quot;lng&quot;: 13.3808
  },
  {
    &quot;lat&quot;: 52.5316,
    &quot;lng&quot;: 13.3884
  }
]
</code></pre>
<p>You can use it to get a routing matrix from any of routing services of your choice, but the order in resulting matrix
should be kept as expected.</p>
<p>Routing matrix example:</p>
<pre><code class="language-json">{
  &quot;profile&quot;: &quot;normal_car&quot;,
  &quot;travelTimes&quot;: [
    0,
    609,
    981,
    906,
    813,
    0,
    371,
    590,
    1055,
    514,
    0,
    439,
    948,
    511,
    463,
    0
  ],
  &quot;distances&quot;: [
    0,
    3840,
    5994,
    5333,
    4696,
    0,
    2154,
    3226,
    5763,
    2674,
    0,
    2145,
    5112,
    2470,
    2152,
    0
  ]
}
</code></pre>
<p>If you have already your routing matrix, you can use location indices instead of geocoordinates as described
<a href="../routing/index.html#location-format">here</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../../concepts/pragmatic/routing/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../../concepts/pragmatic/routing/profile.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../../concepts/pragmatic/routing/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../../concepts/pragmatic/routing/profile.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../../../resources/leaflet.js"></script>
        
        <script type="text/javascript" src="../../../resources/map.js"></script>
        

        

    </body>
</html>
